#! /usr/bin/env bash

rm -rf dist/* docs/*
rollup -p @rollup/plugin-typescript -p @rollup/plugin-json -m -f umd -n ShortUniqueId --exports default -i src/index.ts -o dist/short-unique-id.js
tsc -d --emitDeclarationOnly --rootDir src --outDir dist
mv dist/index.d.ts dist/short-unique-id.d.ts
terser -o dist/short-unique-id.min.js dist/short-unique-id.js
typedoc --gaID UA-159642755-1 --readme README.md --theme node_modules/short_uuid_typedoc_template/bin/default --out docs src/index.ts
cp -r ./assets ./docs
mv ./docs/assets/favicon.ico ./docs/
mv ./docs/assets/cookie-policy ./docs/
echo shortunique.id > ./docs/CNAME
